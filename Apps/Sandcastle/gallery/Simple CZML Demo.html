<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">  <!-- Use Chrome Frame in IE -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
    <meta name="description" content="A simple CZML example showing four satellites in orbit around the Earth, and some ground objects.">
    <title>Cesium Demo</title>
    <script type="text/javascript" src="../Sandcastle-header.js"></script>
    <script type="text/javascript">
    var dojoConfig = {
        baseUrl : '../../../Source',
        packages: [
            { name: 'dojo', location: '../ThirdParty/dojo-release-1.9.1/dojo' },
            { name: 'dijit', location: '../ThirdParty/dojo-release-1.9.1/dijit' }
        ]
    };
    </script>
    <script data-dojo-config="async: 1, tlmSiblingOfDojo: 0" src="../../../ThirdParty/dojo-release-1.9.1/dojo/dojo.js"></script>
    <link rel="stylesheet" href="../../../ThirdParty/dojo-release-1.9.1/dijit/themes/claro/claro.css" type="text/css">
</head>
<body class="claro sandcastle-loading" data-sandcastle-bucket="bucket-dojo.html" data-sandcastle-title="Cesium + Dojo">
<style>
    @import url(../templates/bucket.css);
</style>
<div id="cesiumContainer" class="fullSize"></div>
<div id="loadingOverlay"><h1>Loading...</h1></div>
<div id="toolbar"></div>
<script id="cesium_sandcastle_script">
require([
    'Cesium', 'dijit/form/Button'
], function(
    Cesium, Button)
{
    "use strict";

    var gallery = '../../CesiumViewer/Gallery/';

    var czmlDataSource = new Cesium.CzmlDataSource();
    
    function czmlSatellites() {
        Sandcastle.declare(czmlSatellites);    // For highlighting in Sandcastle.
        czmlDataSource.loadUrl(gallery + 'simple.czml').then(function() {
           viewer.homeButton.viewModel.command();
           var dataClock = czmlDataSource.getClock();
           if(typeof dataClock !== 'undefined') {
               dataClock.clone(viewer.clock);
               viewer.timeline.zoomTo(dataClock.startTime, dataClock.stopTime);
           }
        });
    }

    function czmlSensors() {
        Sandcastle.declare(czmlSensors);    // For highlighting in Sandcastle.
        czmlDataSource.loadUrl(gallery + 'LotsOfSensors.czml').then(function() {
            viewer.homeButton.viewModel.command();
            var dataClock = czmlDataSource.getClock();
            if(typeof dataClock !== 'undefined') {
                dataClock.clone(viewer.clock);
                viewer.timeline.zoomTo(dataClock.startTime, dataClock.stopTime);
            }
         });
    }

    function czmlVehicle() {
        Sandcastle.declare(czmlVehicle);    // For highlighting in Sandcastle.
        czmlDataSource.loadUrl(gallery + 'Vehicle.czml').then(function() {
            viewer.homeButton.viewModel.command();
            var dataClock = czmlDataSource.getClock();
            if(typeof dataClock !== 'undefined') {
                dataClock.clone(viewer.clock);
                viewer.timeline.zoomTo(dataClock.startTime, dataClock.stopTime);
            }
         });
    }

    var builtInCzml = [
        {
            "id" : "Vehicle",
            "availability" : "2012-08-04T16:00:00Z/2012-08-04T17:04:54.9962195740191Z",
            "billboard" : {
                "eyeOffset" : {
                    "cartesian" : [0.0, 0.0, 0.0]
                },
                "horizontalOrigin" : "CENTER",
                "image" : "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAEISURBVEhLvVXBDYQwDOuojHKj8LhBbpTbpBCEkZsmIVTXq1RVQGrHiWlLmTTqPiZBlyLgy/KSZQ5JSHDQ/mCYCsC8106kDU0AdwRnvYZArWRcAl0dcYJq1hWCb3hBrumbDAVMwAC82WoRvgMnVMDBnB0nYZFTbE6BBvdUGqVqCbjBIk3PyFFR/NU7EKzru+qZsau3ryPwwCRLKYOzutZuCL6fUmWeJGzNzL/RxAMrUmASSCkkAayk2IxPlwhAAYGpsiHQjbLccfdOY5gKkCXAMi7SscAwbQpAnKyctWyUZ6z8ja3OGMepwD8asz+9FnSvbhU8uVOHFIwQsI3/p0CfhuqCSQuxLqsN6mu8SS+N42MAAAAASUVORK5CYII=",
                "pixelOffset" : {
                    "cartesian2" : [0.0, 0.0]
                },
                "scale" : 0.8333333333333334,
                "show" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "boolean" : true
                }],
                "verticalOrigin" : "BOTTOM"
            },
            "label" : {
                "fillColor" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "rgba" : [255, 255, 0, 255]
                }],
                "font" : "bold 10pt Segoe UI Semibold",
                "horizontalOrigin" : "LEFT",
                "outlineColor" : {
                    "rgba" : [0, 0, 0, 255]
                },
                "pixelOffset" : {
                    "cartesian2" : [10.0, 0.0]
                },
                "scale" : 1.0,
                "show" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "boolean" : true
                }],
                "style" : "FILL",
                "text" : "Vehicle",
                "verticalOrigin" : "CENTER"
            },
            "path" : {
                "color" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "rgba" : [255, 255, 0, 255]
                }],
                "outlineWidth" : 0.0,
                "width" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "number" : 5.0
                }],
                "show" : [{
                    "interval" : "2012-08-04T16:00:00Z/2012-08-04T18:00:00Z",
                    "boolean" : true
                }]
            },
            "position" : {
                "interpolationAlgorithm" : "LAGRANGE",
                "interpolationDegree" : 1,
                "epoch" : "2012-08-04T16:00:00Z",
                // Trimmed to just 2 points
                "cartesian" : [0.0, -2379754.6637012, -4665332.88013588, 3628133.68924173,
                               3894.996219574019, -2291336.52323822, -4682359.21232197, 3662718.52171165]
            }
        }
    ];

    function useBuiltInCzml() {
        Sandcastle.declare(useBuiltInCzml);    // For highlighting in Sandcastle.
        czmlDataSource.load(builtInCzml, 'Built-in CZML');
        var dataClock = czmlDataSource.getClock();
        if(typeof dataClock !== 'undefined') {
            dataClock.clone(viewer.clock);
            viewer.timeline.zoomTo(dataClock.startTime, dataClock.stopTime);
        }

        // Zoom in a little closer...
        var extent = new Cesium.Extent(-2.056, 0.587, -2.010, 0.633);
        viewer.scene.getCamera().controller.viewExtent(extent);
    }

    function createButtons() {
        new Button({
            label: 'Satellites',
            onClick: function() {
                czmlSatellites();
                Sandcastle.highlight(czmlSatellites);
            }
        }).placeAt('toolbar');

        new Button({
            label: 'Sensors',
            onClick: function() {
                czmlSensors();
                Sandcastle.highlight(czmlSensors);
            }
        }).placeAt('toolbar');

        new Button({
            label: 'Vehicle',
            onClick: function() {
                czmlVehicle();
                Sandcastle.highlight(czmlVehicle);
            }
        }).placeAt('toolbar');

        new Button({
            label: 'Built-in CZML',
            onClick: function() {
                useBuiltInCzml();
                Sandcastle.highlight(useBuiltInCzml);
            }
        }).placeAt('toolbar');
    }

    // Initialize a viewer capable of drag-and-drop
    // and user customizations.
    var viewer = new Cesium.Viewer('cesiumContainer');
    viewer.dataSources.add(czmlDataSource);
    czmlSatellites(viewer);
    createButtons(viewer);

    Sandcastle.finishedLoading();
});
</script>
</body>
</html>
